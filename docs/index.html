<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>◊ó◊ë◊ô◊ú◊î ◊¢◊ï◊ë◊®◊™ ◊ì◊ô◊í◊ô◊ò◊ú◊ô◊™</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .game-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
            text-align: center;
        }
        
        .title {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 30px;
        }
        
        .package-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto 30px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .package-container:hover {
            transform: scale(1.05);
        }
        
        .package-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            transition: all 0.5s ease;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .layer-1 { background: linear-gradient(45deg, #ff6b6b, #ee5a52); z-index: 20; }
        .layer-2 { background: linear-gradient(45deg, #4ecdc4, #44a08d); z-index: 19; }
        .layer-3 { background: linear-gradient(45deg, #45b7d1, #2980b9); z-index: 18; }
        .layer-4 { background: linear-gradient(45deg, #f093fb, #f5576c); z-index: 17; }
        .layer-5 { background: linear-gradient(45deg, #4facfe, #00f2fe); z-index: 16; }
        .layer-6 { background: linear-gradient(45deg, #43e97b, #38f9d7); z-index: 15; }
        .layer-7 { background: linear-gradient(45deg, #fa709a, #fee140); z-index: 14; }
        .layer-8 { background: linear-gradient(45deg, #a8edea, #fed6e3); z-index: 13; }
        .layer-9 { background: linear-gradient(45deg, #ffecd2, #fcb69f); z-index: 12; }
        .layer-10 { background: linear-gradient(45deg, #667eea, #764ba2); z-index: 11; }
        .layer-11 { background: linear-gradient(45deg, #96fbc4, #f9f047); z-index: 10; }
        .layer-12 { background: linear-gradient(45deg, #ffecd2, #fcb69f); z-index: 9; }
        .layer-13 { background: linear-gradient(45deg, #fccb90, #d57eeb); z-index: 8; }
        .layer-14 { background: linear-gradient(45deg, #e0c3fc, #9bb5ff); z-index: 7; }
        .layer-15 { background: linear-gradient(45deg, #fbd3e9, #bb377d); z-index: 6; }
        .layer-16 { background: linear-gradient(45deg, #89f7fe, #66a6ff); z-index: 5; }
        .layer-17 { background: linear-gradient(45deg, #fdbb2d, #22c1c3); z-index: 4; }
        .layer-18 { background: linear-gradient(45deg, #ff9a9e, #fecfef); z-index: 3; }
        .layer-19 { background: linear-gradient(45deg, #a18cd1, #fbc2eb); z-index: 2; }
        .layer-20 { background: linear-gradient(45deg, #667eea, #764ba2); z-index: 1; }
        
        .layer-removed {
            animation: tearAway 0.8s ease-out forwards;
        }
        
        .layer-removed {
            animation: tearAway 0.8s ease-out forwards;
        }
        
        @keyframes tearAway {
            0% { 
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
            25% { 
                transform: scale(1.1) rotate(-5deg);
                opacity: 0.8;
            }
            50% { 
                transform: scale(1.2) rotate(10deg);
                opacity: 0.6;
            }
            75% { 
                transform: scale(0.5) rotate(-15deg) translateY(-50px);
                opacity: 0.3;
            }
            100% { 
                transform: scale(0) rotate(45deg) translateY(-100px);
                opacity: 0;
            }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-1deg); }
            75% { transform: translateX(5px) rotate(1deg); }
        }
        
        @keyframes bounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .current-player {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .task-display {
            background: linear-gradient(45deg, #ffeaa7, #fab1a0);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            font-size: 1.4em;
            font-weight: bold;
            color: #2d3436;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .instructions {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            color: #495057;
            font-size: 1.1em;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
        }
        
        .btn-success {
            background: linear-gradient(45deg, #56ab2f, #a8e6cf);
        }
        
        .btn-warning {
            background: linear-gradient(45deg, #f093fb, #f5576c);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .player-setup {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .player-input {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1em;
            margin: 10px;
            width: 200px;
        }
        
        .player-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }
        
        .player-tag {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .player-selection {
            background: linear-gradient(45deg, #ffeaa7, #fab1a0);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }
        
        .player-selection h3 {
            color: #2d3436;
            margin-bottom: 15px;
        }
        
        .player-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .player-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .player-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #764ba2, #667eea);
        }
        
        .player-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .game-over {
            background: linear-gradient(45deg, #56ab2f, #a8e6cf);
            color: white;
            padding: 30px;
            border-radius: 20px;
            font-size: 1.5em;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .layer-counter {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #ff6b6b;
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="title">üéÅ ◊ó◊ë◊ô◊ú◊î ◊¢◊ï◊ë◊®◊™ ◊ì◊ô◊í◊ô◊ò◊ú◊ô◊™</h1>
        <p class="subtitle">◊û◊©◊ó◊ß ◊ß◊ë◊ï◊¶◊™◊ô ◊û◊î◊†◊î ◊ú◊õ◊ô◊™◊î ◊í'</p>
        
        <div id="setup-phase">
            <div class="player-setup">
                <h3>◊î◊í◊ì◊®◊™ ◊©◊ó◊ß◊†◊ô◊ù</h3>
                <input type="text" id="playerName" class="player-input" placeholder="◊î◊õ◊†◊° ◊©◊ù ◊™◊ú◊û◊ô◊ì">
                <button onclick="addPlayer()" class="btn btn-primary">◊î◊ï◊°◊£ ◊©◊ó◊ß◊ü</button>
                <div id="playerList" class="player-list"></div>
                <button onclick="startGame()" class="btn btn-success" id="startBtn" disabled>◊î◊™◊ó◊ú ◊û◊©◊ó◊ß!</button>
            </div>
        </div>
        
        <div id="game-phase" style="display: none;">
            <div class="instructions">
                ◊ú◊ó◊• ◊¢◊ú ◊î◊ó◊ë◊ô◊ú◊î ◊õ◊ì◊ô ◊ú◊§◊™◊ï◊ó ◊©◊õ◊ë◊î ◊ï◊ú◊í◊ú◊ï◊™ ◊ê◊™ ◊î◊û◊©◊ô◊û◊î!
            </div>
            
            <div class="current-player" id="currentPlayer"></div>
            
            <div class="package-container" onclick="openLayer()">
                <div class="layer-counter" id="layerCounter">20</div>
                <div class="package-layer layer-1" id="layer1">◊©◊õ◊ë◊î 1</div>
                <div class="package-layer layer-2" id="layer2">◊©◊õ◊ë◊î 2</div>
                <div class="package-layer layer-3" id="layer3">◊©◊õ◊ë◊î 3</div>
                <div class="package-layer layer-4" id="layer4">◊©◊õ◊ë◊î 4</div>
                <div class="package-layer layer-5" id="layer5">◊©◊õ◊ë◊î 5</div>
                <div class="package-layer layer-6" id="layer6">◊©◊õ◊ë◊î 6</div>
                <div class="package-layer layer-7" id="layer7">◊©◊õ◊ë◊î 7</div>
                <div class="package-layer layer-8" id="layer8">◊©◊õ◊ë◊î 8</div>
                <div class="package-layer layer-9" id="layer9">◊©◊õ◊ë◊î 9</div>
                <div class="package-layer layer-10" id="layer10">◊©◊õ◊ë◊î 10</div>
                <div class="package-layer layer-11" id="layer11">◊©◊õ◊ë◊î 11</div>
                <div class="package-layer layer-12" id="layer12">◊©◊õ◊ë◊î 12</div>
                <div class="package-layer layer-13" id="layer13">◊©◊õ◊ë◊î 13</div>
                <div class="package-layer layer-14" id="layer14">◊©◊õ◊ë◊î 14</div>
                <div class="package-layer layer-15" id="layer15">◊©◊õ◊ë◊î 15</div>
                <div class="package-layer layer-16" id="layer16">◊©◊õ◊ë◊î 16</div>
                <div class="package-layer layer-17" id="layer17">◊©◊õ◊ë◊î 17</div>
                <div class="package-layer layer-18" id="layer18">◊©◊õ◊ë◊î 18</div>
                <div class="package-layer layer-19" id="layer19">◊©◊õ◊ë◊î 19</div>
                <div class="package-layer layer-20" id="layer20">üéÅ ◊û◊™◊†◊î!</div>
            </div>
            
            <div class="task-display" id="taskDisplay">
                ◊ú◊ó◊• ◊¢◊ú ◊î◊ó◊ë◊ô◊ú◊î ◊õ◊ì◊ô ◊ú◊î◊™◊ó◊ô◊ú!
            </div>
            
            <div class="player-selection" id="playerSelection">
                <h3>◊¢◊õ◊©◊ô◊ï ◊™◊ï◊® ◊©◊ú <span id="currentPlayerName"></span> ◊ú◊ë◊ó◊ï◊® ◊ú◊û◊ô ◊ú◊î◊¢◊ë◊ô◊® ◊ê◊™ ◊î◊ó◊ë◊ô◊ú◊î!</h3>
                <div class="player-buttons" id="playerButtons"></div>
                <div class="used-players" id="usedPlayers"></div>
            </div>
            
            <div class="controls">
                <button onclick="finishTask()" class="btn btn-success" id="finishTaskBtn" disabled>◊°◊ô◊ô◊û◊™◊ô ◊ê◊™ ◊î◊û◊©◊ô◊û◊î!</button>
                <button onclick="resetGame()" class="btn btn-warning">◊ê◊ô◊§◊ï◊° ◊û◊©◊ó◊ß</button>
            </div>
        </div>
        
        <div id="game-over" style="display: none;">
            <div class="game-over">
                üéâ ◊î◊û◊©◊ó◊ß ◊î◊°◊™◊ô◊ô◊ù! üéâ<br>
                ◊õ◊ú ◊î◊õ◊ë◊ï◊ì ◊ú◊õ◊ú ◊î◊©◊ó◊ß◊†◊ô◊ù!
            </div>
            <button onclick="resetGame()" class="btn btn-primary">◊û◊©◊ó◊ß ◊ó◊ì◊©</button>
        </div>
    </div>

    <script>
        let players = [];
        let currentPlayerIndex = 0;
        let currentLayer = 1;
        let gameStarted = false;
        let usedPlayers = [];
        let taskCompleted = false;
        
        const tasks = [
            "üé≠ ◊¢◊©◊î ◊§◊®◊¶◊ï◊£ ◊û◊¶◊ó◊ô◊ß ◊ú◊û◊¶◊ú◊û◊î!",
            "üê∂ ◊ó◊ß◊î ◊ß◊ï◊ú ◊©◊ú ◊ó◊ô◊î ◊û◊ë◊ó◊ô◊®◊™◊ö",
            "üï∫ ◊®◊ß◊ï◊ì 10 ◊©◊†◊ô◊ï◊™ ◊ë◊ú◊ô ◊û◊ï◊ñ◊ô◊ß◊î",
            "üåà ◊û◊¶◊ê ◊û◊©◊î◊ï ◊¶◊ë◊¢◊ï◊†◊ô ◊ë◊ë◊ô◊™ ◊ï◊™◊®◊ê◊î ◊ú◊õ◊ï◊ú◊ù",
            "üìñ ◊°◊§◊® ◊ë◊ì◊ô◊ó◊î ◊ê◊ï ◊ó◊ô◊ì◊î",
            "üéµ ◊©◊ô◊® ◊©◊ô◊® ◊ß◊¶◊® ◊©◊õ◊ï◊ú◊ù ◊û◊õ◊ô◊®◊ô◊ù",
            "ü§∏ ◊¢◊©◊î ◊™◊®◊í◊ô◊ú ◊î◊™◊¢◊û◊ú◊ï◊™ (◊ß◊§◊ô◊¶◊ï◊™, ◊û◊™◊ô◊ó◊ï◊™)",
            "üé® ◊¶◊ô◊ô◊® ◊û◊©◊î◊ï ◊ë◊ê◊ï◊ï◊ô◊® ◊ï◊î◊ê◊ó◊®◊ô◊ù ◊ô◊†◊ó◊©◊ï ◊û◊î ◊ñ◊î",
            "üì∏ ◊î◊ë◊ê ◊ì◊ë◊® ◊©◊û◊™◊ó◊ô◊ú ◊ë◊ê◊ï◊™ ◊ë' ◊ï◊™◊®◊ê◊î ◊ú◊õ◊ï◊ú◊ù",
            "üéä ◊ë◊®◊ö ◊ê◊™ ◊õ◊ú ◊î◊ó◊ë◊®◊ô◊ù ◊ë◊õ◊ô◊™◊î ◊ë◊û◊©◊§◊ò ◊ô◊§◊î!",
            "ü¶∂ ◊î◊®◊ê◊î ◊®◊ô◊ß◊ï◊ì ◊ô◊©◊ô◊ë◊î (◊®◊ß ◊ô◊ì◊ô◊ô◊ù)",
            "üó£Ô∏è ◊ê◊û◊ï◊® ◊û◊©◊§◊ò ◊¢◊ù ◊ß◊ï◊ú ◊û◊¶◊ó◊ô◊ß",
            "üôÉ ◊¢◊©◊î ◊§◊¢◊ï◊ú◊î ◊î◊§◊ï◊õ◊î (◊ú◊ì◊ï◊í◊û◊î: ◊™◊í◊ô◊ì ◊©◊ú◊ï◊ù ◊õ◊©◊ê◊™◊î ◊û◊™◊õ◊ï◊ï◊ü ◊ë◊ô◊ô)",
            "üé™ ◊¢◊©◊î ◊ó◊ô◊ß◊ï◊ô ◊©◊ú ◊û◊ô◊©◊î◊ï ◊û◊î◊õ◊ô◊™◊î (◊ë◊ó◊ô◊ï◊ë!)",
            "üßô‚Äç‚ôÄÔ∏è ◊î◊û◊¶◊ê ◊õ◊ô◊©◊ï◊£ ◊ß◊°◊ù ◊ï◊™◊í◊ô◊ì ◊ê◊ï◊™◊ï",
            "üçï ◊°◊§◊® ◊ê◊ô◊ñ◊î ◊ê◊ï◊õ◊ú ◊ê◊™◊î ◊î◊õ◊ô ◊ê◊ï◊î◊ë ◊ï◊ú◊û◊î",
            "‚≠ê ◊™◊ü ◊û◊ó◊û◊ê◊î ◊ú◊ó◊ë◊® ◊û◊î◊õ◊ô◊™◊î",
            "üéØ ◊¢◊©◊î ◊™◊†◊ï◊¢◊î ◊ï◊ê◊ó◊®◊ô◊ù ◊ô◊ó◊ß◊ï ◊ê◊ï◊™◊ö",
            "üåü ◊°◊§◊® ◊¢◊ú ◊ì◊ë◊® ◊ê◊ó◊ì ◊©◊ê◊™◊î ◊í◊ê◊î ◊ë◊ï",
            "üéâ ◊ó◊í◊ï◊í ◊¢◊ù ◊õ◊ú ◊î◊õ◊ô◊™◊î - ◊¶◊®◊ó◊ï ◊ô◊ó◊ì ◊õ◊ú ◊î◊õ◊ë◊ï◊ì!"
        ];
        
        function addPlayer() {
            const playerName = document.getElementById('playerName').value.trim();
            if (playerName && !players.includes(playerName)) {
                players.push(playerName);
                updatePlayerList();
                document.getElementById('playerName').value = '';
                document.getElementById('startBtn').disabled = players.length < 2;
            }
        }
        
        function updatePlayerList() {
            const playerList = document.getElementById('playerList');
            playerList.innerHTML = players.map(player => 
                `<span class="player-tag">${player}</span>`
            ).join('');
        }
        
        function startGame() {
            if (players.length < 2) return;
            
            gameStarted = true;
            usedPlayers = []; // ◊ê◊ô◊§◊ï◊° ◊®◊©◊ô◊û◊™ ◊î◊©◊ó◊ß◊†◊ô◊ù ◊©◊õ◊ë◊® ◊©◊ô◊ó◊ß◊ï
            document.getElementById('setup-phase').style.display = 'none';
            document.getElementById('game-phase').style.display = 'block';
            updateCurrentPlayer();
        }
        
        function updateCurrentPlayer() {
            const currentPlayerDiv = document.getElementById('currentPlayer');
            currentPlayerDiv.textContent = `◊™◊ï◊® ◊©◊ú: ${players[currentPlayerIndex]}`;
            
            // ◊î◊ï◊°◊§◊™ ◊î◊©◊ó◊ß◊ü ◊î◊†◊ï◊õ◊ó◊ô ◊ú◊®◊©◊ô◊û◊™ ◊î◊©◊ó◊ß◊†◊ô◊ù ◊©◊©◊ô◊ó◊ß◊ï
            if (!usedPlayers.includes(players[currentPlayerIndex])) {
                usedPlayers.push(players[currentPlayerIndex]);
            }
            
            updateUsedPlayersList();
        }
        
        function updateUsedPlayersList() {
            const usedPlayersDiv = document.getElementById('usedPlayers');
            if (usedPlayers.length > 0) {
                usedPlayersDiv.textContent = `◊©◊ó◊ß◊†◊ô◊ù ◊©◊©◊ô◊ó◊ß◊ï ◊õ◊ë◊®: ${usedPlayers.join(', ')}`;
            }
        }
        
        function openLayer() {
            if (!gameStarted || currentLayer > 20 || taskCompleted) return;
            
            // ◊î◊°◊®◊™ ◊î◊©◊õ◊ë◊î ◊î◊†◊ï◊õ◊ó◊ô◊™ ◊¢◊ù ◊ê◊§◊ß◊ò ◊ß◊®◊ô◊¢◊î
            const layer = document.getElementById(`layer${currentLayer}`);
            layer.classList.add('layer-removed');
            
            // ◊î◊ï◊°◊§◊™ ◊®◊¢◊ô◊ì◊î ◊ú◊ó◊ë◊ô◊ú◊î
            const packageContainer = document.querySelector('.package-container');
            packageContainer.style.animation = 'shake 0.5s ease-in-out';
            setTimeout(() => {
                packageContainer.style.animation = '';
            }, 500);
            
            // ◊î◊¶◊í◊™ ◊î◊û◊©◊ô◊û◊î
            const taskDisplay = document.getElementById('taskDisplay');
            if (currentLayer <= tasks.length) {
                taskDisplay.textContent = tasks[currentLayer - 1];
                taskDisplay.style.animation = 'bounce 0.8s ease-out';
                setTimeout(() => {
                    taskDisplay.style.animation = '';
                }, 800);
            } else {
                taskDisplay.textContent = "üéÅ ◊û◊¶◊ê◊™ ◊ê◊™ ◊î◊û◊™◊†◊î! ◊õ◊ú ◊î◊õ◊ë◊ï◊ì!";
            }
            
            // ◊¢◊ì◊õ◊ï◊ü ◊û◊ï◊†◊î ◊î◊©◊õ◊ë◊ï◊™
            const layerCounter = document.getElementById('layerCounter');
            layerCounter.textContent = 20 - currentLayer;
            
            // ◊î◊§◊¢◊ú◊™ ◊õ◊§◊™◊ï◊® "◊°◊ô◊ô◊û◊™◊ô ◊ê◊™ ◊î◊û◊©◊ô◊û◊î"
            document.getElementById('finishTaskBtn').disabled = false;
            taskCompleted = true;
            
            currentLayer++;
            
            // ◊ë◊ì◊ô◊ß◊î ◊ê◊ù ◊î◊û◊©◊ó◊ß ◊†◊í◊û◊®
            if (currentLayer > 20) {
                setTimeout(() => {
                    document.getElementById('game-phase').style.display = 'none';
                    document.getElementById('game-over').style.display = 'block';
                }, 2000);
            }
        }
        
        function finishTask() {
            // ◊î◊¶◊í◊™ ◊ë◊ó◊ô◊®◊™ ◊î◊©◊ó◊ß◊ü ◊î◊ë◊ê
            if (currentLayer <= 20) {
                showPlayerSelection();
            }
        }
        
        function showPlayerSelection() {
            const playerSelection = document.getElementById('playerSelection');
            const currentPlayerName = document.getElementById('currentPlayerName');
            const playerButtons = document.getElementById('playerButtons');
            
            currentPlayerName.textContent = players[currentPlayerIndex];
            playerSelection.style.display = 'block';
            
            // ◊ô◊¶◊ô◊®◊™ ◊õ◊§◊™◊ï◊®◊ô◊ù ◊ú◊õ◊ú ◊î◊©◊ó◊ß◊†◊ô◊ù (◊ó◊ï◊• ◊û◊î◊©◊ó◊ß◊ü ◊î◊†◊ï◊õ◊ó◊ô)
            const availablePlayers = players.filter((player, index) => index !== currentPlayerIndex);
            
            playerButtons.innerHTML = availablePlayers.map(player => 
                `<button class="player-btn" onclick="selectNextPlayer('${player}')">${player}</button>`
            ).join('');
            
            document.getElementById('finishTaskBtn').disabled = true;
        }
        
        function selectNextPlayer(selectedPlayer) {
            // ◊û◊¶◊ô◊ê◊™ ◊î◊ê◊ô◊†◊ì◊ß◊° ◊©◊ú ◊î◊©◊ó◊ß◊ü ◊©◊†◊ë◊ó◊®
            currentPlayerIndex = players.indexOf(selectedPlayer);
            
            // ◊î◊°◊™◊®◊™ ◊ë◊ó◊ô◊®◊™ ◊î◊©◊ó◊ß◊ü
            document.getElementById('playerSelection').style.display = 'none';
            
            // ◊¢◊ì◊õ◊ï◊ü ◊î◊©◊ó◊ß◊ü ◊î◊†◊ï◊õ◊ó◊ô
            updateCurrentPlayer();
            
            // ◊ê◊ô◊§◊ï◊° ◊î◊û◊©◊ô◊û◊î
            taskCompleted = false;
            document.getElementById('taskDisplay').textContent = '◊ú◊ó◊• ◊¢◊ú ◊î◊ó◊ë◊ô◊ú◊î ◊õ◊ì◊ô ◊ú◊§◊™◊ï◊ó ◊ê◊™ ◊î◊©◊õ◊ë◊î ◊î◊ë◊ê◊î!';
        }
        
        function resetGame() {
            // ◊ê◊ô◊§◊ï◊° ◊õ◊ú ◊î◊û◊©◊™◊†◊ô◊ù
            currentLayer = 1;
            currentPlayerIndex = 0;
            gameStarted = false;
            usedPlayers = [];
            taskCompleted = false;
            
            // ◊ê◊ô◊§◊ï◊° ◊î◊û◊û◊©◊ß
            document.getElementById('setup-phase').style.display = 'block';
            document.getElementById('game-phase').style.display = 'none';
            document.getElementById('game-over').style.display = 'none';
            document.getElementById('playerSelection').style.display = 'none';
            
            // ◊ê◊ô◊§◊ï◊° ◊î◊©◊õ◊ë◊ï◊™
            for (let i = 1; i <= 20; i++) {
                const layer = document.getElementById(`layer${i}`);
                layer.classList.remove('layer-removed');
            }
            
            // ◊ê◊ô◊§◊ï◊° ◊î◊ò◊ß◊°◊ò◊ô◊ù
            document.getElementById('taskDisplay').textContent = '◊ú◊ó◊• ◊¢◊ú ◊î◊ó◊ë◊ô◊ú◊î ◊õ◊ì◊ô ◊ú◊î◊™◊ó◊ô◊ú!';
            document.getElementById('layerCounter').textContent = '20';
            document.getElementById('finishTaskBtn').disabled = true;
        }
        
        // ◊ê◊§◊©◊®◊ï◊™ ◊ú◊î◊ï◊°◊ô◊£ ◊©◊ó◊ß◊ü ◊ë◊ú◊ó◊ô◊¶◊î ◊¢◊ú Enter
        document.getElementById('playerName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addPlayer();
            }
        });
    </script>
</body>
</html>
